

### HTTP(Hyper Text Transfer Protocol)

- 웹상에서 **서버**와 **클라이언트** 사이에서 정보를 주고받을 수 있는 프로토콜이다.

- 요청(Request)과 응답(Response)로 구성되어 있다.

- 클라이언트가 요청하면 서버에서 응답하는 구조로 되어 있다.

- 상태가 없는(stateless) 프로토콜이다. 즉, 데이터를 주고 받을 때 각각의 데이터는 독립적이다(이전 데이터과 관계가 없다.)

#### 약점

- 암호화하지 않은 통신이라 도청할 수 있다.
- 통신 상대를 확인하지 않기 때문에 위장할 수 있다.
- 완전성을 증명할 수 없기에 변조할 수 있다.

### HTTPS(HTTP Secure)

- TLS(SSL)로 **암호화**된 연결을 하는 HTTP 이다. (HTTP에 TLS라는 껍질을 씌운 것)

> 대칭키 방식 : 하나의 키로 암호화 복호화하는 방법

> 공개키 방식 : 개인키(private key)와 공개키(public key)로 암호화하고 복호화하는 방법
>
> - 개인키 : 각 소유자만 가지고 있는 키(비공개)
> - 공개키 : 모든 사람이 접근 가능한 키(공개키) 

#### 통신 방법

- 서버는 공인된 기관(**CA**) 에서 보증서를 발급받는다.

1. 클라이언트 > 서버 최초 접속에서 2가지 정보를 보낸다.
   - Random Data(by Client)
2. 서버 > 클라이언트 (**공개키 방식**)
   - Random Data(by Server)
   - 인증서
     - 서비스 정보 : 서버 개인키(**Server private key**)로 암호화된 CA, 서비스의 도메인 등등,
     - 서버 공개키(**Server public key**)

3. 클라이언트 > 서버(**공개키 방식**)
   - 인증서 확인
   - pre-master secret 생성 후 서버 공개키를 사용해 암호화해서 전송한다. 
4. 서버
   - 서버 개인키로 pre-master secret 복호화하고, master secret 를 생성한다.
   - master secret로 세션키(**session key**) 를 생성한다.
   - 마찬가지로 클라이언트도, pre-master secret로 세션키(**session key**)를 생성한다.
   - 서버와 클라이언트는 세션키를 이용해서 **대칭키 방식**으로 통신한다.

<img src='assets/HTTP/image.png'>

#### 대칭키와 공개키 방식을 함께 사용하는 이유

- 대칭키는 속도가 빠르지만 키가 노출되면 해킹이 쉽다는 단점이 있다.
- 공개키는 속도가 느리다는 단점이 있다.
- 두 방식의 단점을 보완하고, 장점만 얻기위해 함께 사용한다.

